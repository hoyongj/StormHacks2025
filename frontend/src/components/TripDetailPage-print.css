@media print {
    /* Reset visibility for printing */
    body * {
        visibility: hidden;
    }

    /* Make the trip detail page visible */
    .trip-detail-page {
        position: absolute !important;
        left: 0 !important;
        top: 0 !important;
        width: 100% !important;
        height: auto !important;
        overflow: visible !important;
        visibility: visible !important;
        display: block !important;
        padding: 0 !important;
        margin: 0 !important;
        background-color: white !important;
    }

    .trip-detail-page * {
        visibility: visible !important;
    }

    /* Configure container for print */
    .trip-detail-container {
        position: relative !important;
        width: 100% !important;
        box-shadow: none !important;
        max-height: none !important;
        overflow: visible !important;
        margin: 0 !important;
        padding: 0 !important;
        border-radius: 0 !important;
        background: white !important;
    }

    /* Configure content for print */
    .trip-detail-content {
        padding: 1cm !important;
        width: 100% !important;
        height: auto !important;
        page-break-after: auto !important;
        margin-bottom: 0 !important;
        padding-bottom: 40px !important;
    }

    /* Hide UI elements not needed for print */
    .no-print,
    .trip-detail-overlay,
    .trip-detail-header,
    .trip-detail-footer,
    body > *:not(.trip-detail-page),
    .app__sidebar,
    .app__tabs,
    .app__map-tools,
    button,
    .gm-style-mtc,
    .gm-svpc,
    .gm-style-cc {
        display: none !important;
    }

    /* Show the map for printing */
    .app__map {
        visibility: visible !important;
        display: block !important;
        position: relative !important;
        height: 10cm !important;
        width: 100% !important;
        page-break-before: always !important;
        margin-top: 1cm !important;
    }

    .app__map * {
        visibility: visible !important;
    }

    /* Print-specific styles for trip timeline */
    .trip-detail-timeline {
        page-break-inside: avoid !important;
    }

    .trip-detail-stop {
        page-break-inside: avoid !important;
    }

    /* Add a title for printing */
    .trip-detail-content::before {
        content: attr(data-plan-title);
        display: block !important;
        font-size: 24pt !important;
        font-weight: bold !important;
        margin-bottom: 1cm !important;
        text-align: center !important;
        color: #7f5af0 !important; /* Updated to match the new color theme */
    }

    /* Add page info and date */
    @page {
        size: portrait;
        margin: 2cm;
    }

    /* Print-specific styles for travel segments */
    .trip-detail-travel-info {
        page-break-inside: avoid !important;
        background-color: #f9f9f9 !important;
        padding: 0.5cm !important;
        border-radius: 0.25cm !important;
        border-left: 0.2cm solid #7f5af0 !important; /* Updated to match the new color theme */
    }

    .trip-detail-travel-segment {
        border-left-color: #7f5af0 !important; /* Updated to match the new color theme */
    }

    /* Format text for better print readability */
    h2,
    h3 {
        color: black !important;
    }

    /* Remove any max-height/overflow restrictions */
    .trip-detail {
        max-height: none !important;
        overflow: visible !important;
    }

    /* Ensure text is readable */
    .trip-detail-title h1 {
        color: black !important;
    }
}
